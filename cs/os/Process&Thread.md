
# 1 운영체제는 스케줄링을 소화한다.

* 비동기를 실행할 때는 운영체제의 스케줄링을 따른다.

# 2. 멀티 프로세싱과 멀티태스킹

##  멀티태스킹

	하나의 CPU(또는 시스템)가 여러 작업(Task, 프로세스/스레드)을 동시에 실행하는 것처럼 보이게 하는 방식

- **실제 동작:**

    - CPU는 한 순간에는 보통 하나의 작업만 실행할 수 있음

    - 운영체제가 **스케줄링**을 통해 아주 빠르게 작업들을 번갈아 실행 (컨텍스트 스위칭)

    - 사용자는 여러 프로그램이 동시에 동작하는 것처럼 느낌

- **예시:**

    - 워드 작성하면서 음악 플레이어 실행, 동시에 브라우저에서 인터넷 하는 것


---

##  멀티프로세싱

	 여러 개의 CPU(코어)를 사용해서 동시에 여러 작업을 병렬로 처리하는 것

- **실제 동작:**

    - 작업을 여러 프로세스에 분산해서 **진짜 동시에(parallel)** 실행

    - 멀티코어 CPU 환경에서만 가능



|구분|멀티태스킹|멀티프로세싱|
|---|---|---|
|초점|작업을 동시에 "보이게" 실행|실제로 동시에 실행|
|기반|단일 CPU도 가능 (컨텍스트 스위칭)|멀티코어 CPU 필요|
|처리 방식|시분할(Time-sharing)|병렬 처리(Parallelism)|
|예시|음악 들으면서 문서 작성|코어 여러 개로 병렬 연산|

# 3. 프로세스와 스레드

## 3.1 프로세스

	운영체제에서는 실행 중인 프로그램


* 프로세스는 실행중인 프로그램의 인스턴스이다.

## 3.2 스레드

	스레드는 프로세스 내에서 실행 단위

* 코드를 위에서 아래로 하나씩 내려가는 흐름을 말한다.
* 프로세스 내에서 실행되는 작업 단위를 말한다
* 하나의 프로세스 내에서 동시 작업을 마치 마치 동시에 할 수 있도록 만들어 준다.(스위치 컨텍스트가 일어남.)


# 4. 컨텍스트 스위칭 (Context Switching)

CPU는 운영체제의 관리 하에 여러 원인으로 컨텍스트 스위칭이 발생할 수 있습니다.

CPU의 데이터 레지스터, 주소 레지스터 등등 값을 다양한 방식을 통하여 저장하고 작업이 필요하다면 프로그램 카운터 를 통해 불러옵니다.

## 컨텍스트 스위칭 발생 원인
- 인터럽트 발생
- 시스템 콜 실행
- 스케줄러에 의한 작업 전환
- 락(Lock)이나 세마포어(Semaphore)로 인한 대기

## 동작 과정
- 각 프로세스/스레드 정보는 **PCB(Process Control Block)** 또는 **TCB(Thread Control Block)**에 저장됨
- CPU는 스케줄러에 의해 여러 프로세스/스레드 사이를 번갈아 실행
- 이 과정에서 **레지스터 상태 저장/복원** 등의 비용이 발생

## 스레드 과다 시 영향
- 한 코어에서 스레드 수가 매우 많을 경우 (예: 300개)
    - 스레드 대부분이 **ready/waiting 상태**로 관리됨
    - 컨텍스트 스위칭 비용이 증가 → CPU 효율 감소
    - 일부 스레드는 I/O나 락 대기 때문에 CPU 사용이 지연됨



## 4.1 CPU-bound와 I/O-bound

### 4.1.1 CPU-bound
CPU 작업이 많은 어플리케이션의 경우를 말합니다.

1. 주로 연산 중심의 작업을 수행합니다.
    - 멀티 코어를 지원하는 게임이나 여러 툴들이 CPU 사용량이 높은 이유가 여기에 있음.

- **웹에서의 CPU-bound**
    - 톰캣이나 웹 서버에서는 대부분 **I/O-bound** 작업이 많음
    - 하지만 **암호화, 이미지 처리, 압축 등 특정 연산**에서는 CPU-bound가 발생할 수 있음

- **게임에서의 CPU-bound**
    - 랜더링, 물리 연산 등으로 CPU 사용량이 매우 높음
    - 여러 스레드 단위를 코어별로 분배하여 처리 가능

### 4.1.2 I/O-bound
메모리 할당과 I/O 작업이 중요한 어플리케이션을 말합니다.

1. 디스크, 네트워크, 파일 시스템 관련 작업을 수행함
    - 파일 읽기/쓰기, 네트워크 송수신, DB 쿼리

- I/O 작업이 완료될 때까지 스레드는 **CPU를 사용하지 않고 대기**
- CPU는 다른 스레드나 프로세스를 처리하며 효율적으로 자원을 활용



